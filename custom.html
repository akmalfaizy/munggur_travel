<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Munggur Travel</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      href="./src/img/favicon_travine.svg"
      type="image/x-icons"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
      /* Custom transitions for smooth content entry */
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .burger-line {
        transition: all 0.3s ease;
      }
      .burger-line.open:nth-child(1) {
        transform: rotate(45deg) translate(0, 9px);
      }

      .burger-line.open:nth-child(2) {
        opacity: 0;
      }

      .burger-line.open:nth-child(3) {
        transform: rotate(-45deg) translate(0, -9px);
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <nav
      id="navbar"
      class="bg-white shadow-md fixed top-0 w-full z-50 transition-all duration-300 rounded-b-xl"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          <div class="">
            <a href="./index.html" class="flex items-center">
              <img
                src="./src/img/icon_travine.png"
                alt="Travine Travel Logo"
                class="h-12 w-auto"
                style="filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"
              />
            </a>
          </div>
          <!-- Desktop Nav -->
          <div class="hidden md:flex space-x-8">
            <a
              href="/index.html#home"
              class="text-gray-700 hover:text-orange-600 transition rounded-lg px-2 py-1"
              >Beranda</a
            >
            <a
              href="/index.html#tipe-paket"
              class="text-gray-700 hover:text-orange-600 transition rounded-lg px-2 py-1"
              >Paket Wisata</a
            >
            <a
              href="/index.html#layanan"
              class="text-gray-700 hover:text-orange-600 transition rounded-lg px-2 py-1"
              >Layanan</a
            >
            <a
              href="/index.html#contact"
              class="text-gray-700 hover:text-orange-600 transition rounded-lg px-2 py-1"
              >Kontak</a
            >
          </div>
          <!-- Mobile Burger Menu -->
          <div class="md:hidden">
            <button id="burger-btn" class="focus:outline-none rounded-lg p-2">
              <div class="w-6 h-6 flex flex-col justify-center">
                <span
                  class="burger-line w-full h-0.5 bg-gray-700 mb-1 rounded"
                ></span>
                <span
                  class="burger-line w-full h-0.5 bg-gray-700 mb-1 rounded"
                ></span>
                <span
                  class="burger-line w-full h-0.5 bg-gray-700 rounded"
                ></span>
              </div>
            </button>
          </div>
        </div>
        <!-- Mobile Menu -->
        <div
          id="mobile-menu"
          class="md:hidden hidden bg-white shadow-md rounded-b-xl"
        >
          <a
            href="/index.html#home"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-100 rounded-lg"
            >Beranda</a
          >
          <a
            href="/index.html#tipe-paket"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-100 rounded-lg"
            >Paket Wisata</a
          >
          <a
            href="/index.html#layanan"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-100 rounded-lg"
            >Layanan</a
          >
          <a
            href="/index.html#contact"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-100 rounded-lg"
            >Kontak</a
          >
        </div>
      </div>
    </nav>

    <section id="custom-flow" class="py-16 mt-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-center mb-4 text-orange-600">
          Rencanakan Wisata Impian Anda Sendiri
        </h2>
        <p class="text-center text-lg text-gray-600 mb-12 max-w-2xl mx-auto">
          Tidak menemukan paket yang cocok? Beri tahu kami destinasi impian
          Anda, dan kami akan merancangnya khusus untuk Anda.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
          <div class="bg-white p-6 rounded-xl shadow-lg fade-in">
            <div
              class="bg-orange-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-4xl">üí¨</span>
            </div>
            <h3 class="text-2xl font-semibold mb-2">1. Konsultasi</h3>
            <p class="text-gray-600">
              Isi form di bawah ini dengan destinasi, preferensi hotel, dan
              kebutuhan Anda.
            </p>
          </div>
          <div class="bg-white p-6 rounded-xl shadow-lg fade-in">
            <div
              class="bg-orange-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-4xl">üí∞</span>
            </div>
            <h3 class="text-2xl font-semibold mb-2">2. Dapat Penawaran</h3>
            <p class="text-gray-600">
              Tim kami akan menyusun rencana perjalanan dan mengirimkan
              penawaran harga terbaik (non-binding).
            </p>
          </div>
          <div class="bg-white p-6 rounded-xl shadow-lg fade-in">
            <div
              class="bg-orange-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-4xl">‚úàÔ∏è</span>
            </div>
            <h3 class="text-2xl font-semibold mb-2">3. Berangkat!</h3>
            <p class="text-gray-600">
              Setelah setuju, Anda tinggal duduk santai dan nikmati liburan yang
              kami siapkan.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="custom-form-section" class="py-16 bg-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-center mb-8 text-orange-600">
          Formulir Request Paket Custom
        </h2>
        <form
          id="custom-booking-form"
          class="bg-white shadow-xl rounded-xl p-6 md:p-8 space-y-6 border border-gray-100"
        >
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label
                for="custom-name"
                class="block text-sm font-medium text-gray-700"
                >Nama Lengkap</label
              >
              <input
                type="text"
                id="custom-name"
                name="custom-name"
                placeholder="Nama Anda"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>
            <div>
              <label
                for="custom-contact"
                class="block text-sm font-medium text-gray-700"
                >Kontak (No. WA Aktif)</label
              >
              <input
                type="text"
                id="custom-contact"
                name="custom-contact"
                placeholder="Cth: 08123456789"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label
                for="custom-start-date"
                class="block text-sm font-medium text-gray-700"
                >Tanggal Mulai</label
              >
              <input
                type="date"
                id="custom-start-date"
                name="custom-start-date"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>
            <div>
              <label
                for="custom-end-date"
                class="block text-sm font-medium text-gray-700"
                >Tanggal Selesai</label
              >
              <input
                type="date"
                id="custom-end-date"
                name="custom-end-date"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label
                for="custom-participants"
                class="block text-sm font-medium text-gray-700"
                >Jumlah Peserta</label
              >
              <input
                type="number"
                id="custom-participants"
                name="custom-participants"
                min="1"
                placeholder="Min. 1 orang"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>
            <div>
              <label
                for="custom-accomodation"
                class="block text-sm font-medium text-gray-700"
                >Preferensi Penginapan</label
              >
              <select
                id="custom-accomodation"
                name="custom-accomodation"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
              >
                <option>Hotel Bintang 3-5</option>
                <option>Hotel Budget</option>
                <option>Villa</option>
                <option>Homestay</option>
                <option>Belum termasuk (cari sendiri)</option>
              </select>
            </div>
          </div>

          <div>
            <label
              for="custom-destinations"
              class="block text-sm font-medium text-gray-700"
              >Destinasi / Aktivitas yang Diinginkan</label
            >
            <textarea
              id="custom-destinations"
              name="custom-destinations"
              rows="4"
              placeholder="Sebutkan tempat atau aktivitas yang ingin Anda kunjungi, misal:
- Candi Borobudur
- Jeep Lava Tour Merapi
- Pantai Timang
- Wisata Kuliner Gudeg & Malioboro"
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
              required
            ></textarea>
          </div>

          <div>
            <label
              for="custom-budget"
              class="block text-sm font-medium text-gray-700"
              >Estimasi Budget per Orang (Opsional)</label
            >
            <input
              type="text"
              id="custom-budget"
              name="custom-budget"
              placeholder="Cth: Rp 1.000.000 / orang"
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
            />
          </div>

          <button
            type="submit"
            class="w-full bg-green-600 text-white font-semibold py-3 rounded-md hover:bg-green-700 transition"
          >
            Kirim Request Custom via WhatsApp
          </button>
        </form>
      </div>
    </section>
    <section id="about" class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-center mb-12 text-orange-600">
          Mengapa Memilih Kami?
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <div class="text-center fade-in bg-gray-50 rounded-xl p-2">
            <div
              class="bg-orange-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-2xl">üë®‚Äçüè´</span>
            </div>
            <h3 class="text-xl font-semibold mb-2">
              Pemandu Lokal Berpengalaman
            </h3>
            <p class="text-gray-600">Ahli dalam budaya dan sejarah Jogja.</p>
          </div>
          <div class="text-center fade-in bg-gray-50 rounded-xl p-2">
            <div
              class="bg-orange-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-2xl">üí∞</span>
            </div>
            <h3 class="text-xl font-semibold mb-2">Harga Terbaik</h3>
            <p class="text-gray-600">Paket hemat dengan kualitas tinggi.</p>
          </div>
          <div class="text-center fade-in bg-gray-50 rounded-xl p-2">
            <div
              class="bg-orange-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-2xl">üèûÔ∏è</span>
            </div>
            <h3 class="text-xl font-semibold mb-2">Destinasi Lengkap</h3>
            <p class="text-gray-600">Akses ke semua spot unggulan Jogja.</p>
          </div>
          <div class="text-center fade-in bg-gray-50 rounded-xl p-2">
            <div
              class="bg-orange-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"
            >
              <span class="text-2xl">üìû</span>
            </div>
            <h3 class="text-xl font-semibold mb-2">Pelayanan 24 Jam</h3>
            <p class="text-gray-600">Siap membantu kapan saja.</p>
          </div>
        </div>
      </div>
    </section>

    <footer id="contact" class="bg-gray-800 text-white py-8 rounded-t-xl">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div>
            <a href="index.html" class="flex items-center mb-4">
              <span
                class="text-white font-bold text-xl hover:text-amber-500 transition duration-200"
              >
                travine.id
              </span>
            </a>

            <p class="mb-2">
              Alamat:
              <a
                href="https://www.google.com/maps/place/Jl.+Griya+Pratama+Asri+No.3b,+Bantulan,+Sidoarum,+Kec.+Godean,+Kabupaten+Sleman,+Daerah+Istimewa+Yogyakarta+55264/@-7.7768968,110.3176809,20.64z/data=!4m15!1m8!3m7!1s0x2e7af7c2b05e657d:0x344e48216675806!2sJl.+Griya+Pratama+Asri,+Sidoarum,+Kec.+Godean,+Kabupaten+Sleman,+Daerah+Istimewa+Yogyakarta+55264!3b1!8m2!3d-7.7769817!4d110.3183634!16s%2Fg%2F11fmz20_z5!3m5!1s0x2e7af7c2bc7012e3:0xf02207c388882794!8m2!3d-7.7769556!4d110.3177794!16s%2Fg%2F11xy_1qyh8?entry=ttu"
                target="_blank"
                class="hover:text-amber-500 transition duration-200"
              >
                Griya Pratama Asri No.3B<br />
                Jl. Munggur, Sidoarum, Godean, Sleman, DIY
              </a>
            </p>

            <p class="mb-2">
              WhatsApp:<a
                target="_blank"
                class="hover:text-amber-500"
                href="https://wa.me/628999008880"
              >
                08999008880</a
              >
            </p>
            <p>
              Email:<a
                target="_blank"
                class="hover:text-amber-500"
                href="mailto:someone@example.com"
              >
                info@travine.id</a
              >
            </p>
          </div>
          <div>
            <h3 class="text-lg font-semibold mb-4">Navigasi</h3>
            <ul>
              <li class="mb-2">
                <a
                  href="./index.html"
                  class="hover:text-orange-400 rounded-lg transition"
                  >Beranda</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="./index.html#tipe-paket"
                  class="hover:text-orange-400 rounded-lg transition"
                  >Paket Wisata</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="./index.html#layanan"
                  class="hover:text-orange-400 rounded-lg transition"
                  >Layanan</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="./index.html#contact"
                  class="hover:text-orange-400 rounded-lg transition"
                  >Kontak</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h3 class="text-lg font-semibold mb-4">Ikuti Kami</h3>
            <a
              href="https://www.instagram.com/travine.id/"
              target="_blank"
              class="text-white hover:text-amber-500 mr-4 rounded-lg transition"
              >Instagram</a
            >
          </div>
        </div>
      </div>
    </footer>

    <div class="bg-gray-900 text-white py-4 text-center rounded-b-xl">
      <p>¬© 2025 travine.id All Rights Reserved.</p>
    </div>

    <div
      id="booking-modal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 overflow-y-auto"
      style="display: none"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="bg-white rounded-xl shadow-2xl w-full max-w-lg m-4 overflow-hidden transform transition-all sm:my-8 sm:align-middle"
        onclick="event.stopPropagation()"
      >
        <div class="px-6 py-4 bg-orange-600 flex justify-between items-center">
          <h3 class="text-xl font-bold text-white">
            Form Pemesanan Paket Wisata
          </h3>
          <button
            id="close-modal"
            class="text-white text-3xl font-bold leading-none hover:text-gray-200 transition"
            aria-label="Tutup"
          >
            √ó
          </button>
        </div>

        <div class="p-6 max-h-[80vh] overflow-y-auto">
          <form id="booking-form" class="space-y-4">
            <div>
              <label
                for="package"
                class="block text-sm font-medium text-gray-700"
                >Paket yang Dipilih</label
              >
              <input
                type="text"
                id="package"
                name="package"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 bg-gray-50 cursor-default"
                readonly
                required
              />
            </div>

            <div>
              <label for="name" class="block text-sm font-medium text-gray-700"
                >Nama Lengkap</label
              >
              <input
                type="text"
                id="name"
                name="name"
                placeholder="Masukkan nama Anda"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>

            <div>
              <label
                for="contact"
                class="block text-sm font-medium text-gray-700"
                >Kontak (No. WA Aktif)</label
              >
              <input
                type="text"
                id="contact"
                name="contact"
                placeholder="Cth: 08123456789"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>

            <div>
              <label for="date" class="block text-sm font-medium text-gray-700"
                >Tanggal Keberangkatan</label
              >
              <input
                type="date"
                id="date"
                name="date"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>

            <div>
              <label
                for="participants"
                class="block text-sm font-medium text-gray-700"
                >Jumlah Peserta</label
              >
              <input
                type="number"
                id="participants"
                name="participants"
                min="1"
                placeholder="Min. 1 orang"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
                required
              />
            </div>

            <div>
              <label
                for="message"
                class="block text-sm font-medium text-gray-700"
                >Pesan Tambahan (Opsional)</label
              >
              <textarea
                id="message"
                name="message"
                rows="3"
                placeholder="Contoh: Kami butuh antar-jemput dari bandara."
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"
              ></textarea>
            </div>

            <button
              type="submit"
              class="w-full bg-green-600 text-white font-semibold py-3 rounded-md hover:bg-green-700 transition"
            >
              Kirim Pemesanan via WhatsApp
            </button>
          </form>
        </div>
      </div>
    </div>

    <div
      id="image-modal"
      class="fixed inset-0 bg-black bg-opacity-90 hidden items-center justify-center z-50 transition-opacity duration-300"
      onclick="this.classList.add('hidden')"
    >
      <div
        class="relative max-w-6xl max-h-full mx-auto p-4"
        onclick="event.stopPropagation()"
      >
        <button
          id="close-image-modal"
          class="absolute top-4 right-4 text-white text-3xl font-bold p-2 z-50 bg-black bg-opacity-50 rounded-full hover:bg-opacity-75 transition"
        >
          √ó
        </button>
        <img
          id="full-image-display"
          src=""
          alt=""
          class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"
        />
        <div
          id="image-caption"
          class="text-white text-center mt-3 text-lg font-semibold"
        ></div>
      </div>
    </div>

    <script>
      // Definisikan packages array di sini agar fungsi loadPackages dapat berjalan.
      // Jika array ini tidak ada, kartu paket tidak akan dimuat.
      const packages = [
        {
          id: 1,
          title: "Paket Wisata Jogja 3D2N",
          desc: "Nikmati Candi Borobudur, Pantai Timang, dan Malioboro.",
          price: "Mulai Rp 1.500.000",
          img: "placeholder-img-1.jpg",
        },
        {
          id: 2,
          title: "Jeep Lava Tour Merapi",
          desc: "Petualangan ekstrem di kaki Gunung Merapi.",
          price: "Mulai Rp 350.000",
          img: "placeholder-img-2.jpg",
        },
        {
          id: 3,
          title: "Custom Tour - Hubungi Kami",
          desc: "Rancang perjalanan impian Anda sendiri.",
          price: "Harga Terbaik!",
          img: "placeholder-img-3.jpg",
        },
        // Tambahkan data paket lainnya di sini
      ];

      const waNumber = "628999008880";
      let currentIndex = 0;
      const packagesPerLoad = 6;
      const packageGrid = document.getElementById("package-grid"); // Pastikan ID ini ada di HTML Anda jika Anda ingin menampilkan paket
      const loadMoreBtn = document.getElementById("load-more-btn");
      const burgerBtn = document.getElementById("burger-btn");
      const mobileMenu = document.getElementById("mobile-menu");
      const bookingModal = document.getElementById("booking-modal");
      const closeModalBtn = document.getElementById("close-modal");
      const bookingForm = document.getElementById("booking-form");
      const customBookingForm = document.getElementById("custom-booking-form");

      const imageModal = document.getElementById("image-modal");
      const fullImageDisplay = document.getElementById("full-image-display");
      const closeImageModalBtn = document.getElementById("close-image-modal");
      const imageCaption = document.getElementById("image-caption");

      // FUNGSI FORMAT TANGGAL
      const formatDate = (dateString) => {
        if (!dateString) return "Tanggal Tidak Diisi";
        try {
          const dateObj = new Date(dateString);
          // Menambahkan 1 hari untuk fix masalah timezone pada input date
          dateObj.setDate(dateObj.getDate() + 1);
          return dateObj.toLocaleDateString("id-ID", {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
          });
        } catch (error) {
          return dateString;
        }
      };

      // FUNGSI BUKA MODAL GAMBAR
      window.openImageModal = (imageUrl, caption) => {
        if (!imageModal || !fullImageDisplay) return;
        fullImageDisplay.src = imageUrl;
        imageCaption.textContent = caption;
        imageModal.classList.remove("hidden");
        imageModal.style.display = "flex";
      };

      function createPackageCard(pkg) {
        const card = document.createElement("div");
        card.className =
          "bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-[1.02] transition duration-300 ease-in-out";

        card.innerHTML = `
            <div class="relative pt-[100%] rounded-t-xl overflow-hidden">
                <img 
                    src="${pkg.img}" 
                    alt="${pkg.title}" 
                    class="absolute inset-0 w-full h-full object-cover cursor-pointer"
                    onclick="openImageModal('${pkg.img}', '${pkg.title}')"
                    onerror="this.onerror=null;this.src='https://via.placeholder.com/400x400?text=Gambar+Tidak+Tersedia';"
                >
            </div>
            <div class="p-6">
                <h3 class="text-xl font-semibold mb-2 text-gray-800">${pkg.title}</h3>
                <p class="text-gray-600 text-sm mb-4 h-10 overflow-hidden">${pkg.desc}</p>
                <p class="text-2xl font-bold text-orange-600 mb-4">${pkg.price}</p>
                <button class="bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold block text-center hover:bg-orange-700 transition book-btn" data-package="${pkg.title}">
                    Pesan Sekarang
                </button>
            </div>
        `;
        return card;
      }

      function loadPackages() {
        if (!packageGrid) return;
        const endIndex = Math.min(
          currentIndex + packagesPerLoad,
          packages.length
        );
        for (let i = currentIndex; i < endIndex; i++) {
          const card = createPackageCard(packages[i]);
          packageGrid.appendChild(card);
        }
        currentIndex = endIndex;
        if (currentIndex >= packages.length && loadMoreBtn) {
          loadMoreBtn.style.display = "none";
        }
      }

      // =========================================================
      // EVENT LISTENER FORMULIR CUSTOM (DIPERBAIKI)
      // =========================================================

      if (customBookingForm) {
        customBookingForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // --- Mengambil nilai dari form Custom ---
          const nama = document.getElementById("custom-name").value;
          const kontak = document.getElementById("custom-contact").value;
          const tglMulai = document.getElementById("custom-start-date").value;
          const tglSelesai = document.getElementById("custom-end-date").value;
          const jumlahPeserta = document.getElementById(
            "custom-participants"
          ).value;
          const penginapan = document.getElementById(
            "custom-accomodation"
          ).value;
          const destinasi = document.getElementById(
            "custom-destinations"
          ).value;
          const budget =
            document.getElementById("custom-budget").value ||
            "Tidak Disebutkan";

          // --- Format Tanggal ---
          const tglMulaiFormatted = formatDate(tglMulai);
          const tglSelesaiFormatted = formatDate(tglSelesai);

          // --- Membuat pesan WhatsApp (sudah di-encode) ---
          const message =
            `%F0%9F%93%9D%20Request%20Paket%20Custom%20%F0%9F%93%9D%0A%0A` +
            `*DATA%20PEMESANAN*%0A` +
            `Nama%20Lengkap%3A%20${encodeURIComponent(nama)}%0A` +
            `No.%20WA%20Aktif%3A%20${encodeURIComponent(kontak)}%0A%0A` +
            `*DETAIL%20PERJALANAN*%0A` +
            `Tanggal%20Mulai%3A%20${encodeURIComponent(tglMulaiFormatted)}%0A` +
            `Tanggal%20Selesai%3A%20${encodeURIComponent(
              tglSelesaiFormatted
            )}%0A` +
            `Jumlah%20Peserta%3A%20${encodeURIComponent(
              jumlahPeserta
            )}%20Orang%0A` +
            `Preferensi%20Penginapan%3A%20${encodeURIComponent(
              penginapan
            )}%0A%0A` +
            `*DESTINASI%20%26%20BUDGET*%0A` +
            `Destinasi%2FAktivitas%3A%0A${encodeURIComponent(destinasi)}%0A` +
            `Estimasi%20Budget%2FOrang%3A%20${encodeURIComponent(
              budget
            )}%0A%0A` +
            `Mohon%20bantuannya%20untuk%20dibuatkan%20rencana%20perjalanan%20dan%20penawaran%20terbaik.%20Terima%20kasih%21`;

          // --- Kirim ke WhatsApp dan buka di tab baru ---
          window.open(`https://wa.me/${waNumber}?text=${message}`, "_blank");
        });
      }

      // =========================================================
      // EVENT LISTENER BOOKING MODAL (DIPERBAIKI)
      // =========================================================

      if (bookingForm) {
        bookingForm.addEventListener("submit", (e) => {
          e.preventDefault();

          // --- Mengambil nilai dari form Booking Modal ---
          const nama = document.getElementById("name").value;
          const telp = document.getElementById("contact").value;
          const paketTour = document.getElementById("package").value;
          const tanggalTour = document.getElementById("date").value;
          const jumlahPeserta = document.getElementById("participants").value;
          const catatan =
            document.getElementById("message").value || "Tidak Ada";

          // --- Format Tanggal ---
          const formattedDate = formatDate(tanggalTour);

          // --- Membuat pesan WhatsApp (sudah di-encode) ---
          const message =
            `%F0%9F%8E%89%20Permintaan%20Booking%20Paket%20Wisata%20%28Modal%29%20%F0%9F%8E%89%0A%0A` +
            `*DATA%20PEMESANAN*%0A` +
            `Nama%3A%20${encodeURIComponent(nama)}%0A` +
            `No.%20Telp%2FWA%3A%20${encodeURIComponent(telp)}%0A%0A` +
            `*DETAIL%20TOUR*%0A` +
            `Paket%20Tour%3A%20${encodeURIComponent(paketTour)}%0A` +
            `Tanggal%20Tour%3A%20${encodeURIComponent(formattedDate)}%0A` +
            `Jumlah%20Peserta%3A%20${encodeURIComponent(
              jumlahPeserta
            )}%20Orang%0A` +
            `Catatan%20Tambahan%3A%20${encodeURIComponent(catatan)}%0A%0A` +
            `Mohon%20konfirmasi%20ketersediaan%20paket%20dan%20total%20biaya.%20Terima%20kasih%21`;

          // --- Kirim ke WhatsApp dan buka di tab baru ---
          window.open(`https://wa.me/${waNumber}?text=${message}`, "_blank");

          // Tutup modal dan reset form setelah kirim
          bookingModal.classList.add("hidden");
          bookingModal.style.display = "none";
          bookingForm.reset();
        });
      }

      // =========================================================
      // EVENT LISTENERS LAINNYA
      // =========================================================

      // Tutup modal gambar
      if (closeImageModalBtn) {
        closeImageModalBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          imageModal.classList.add("hidden");
          imageModal.style.display = "none";
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Baris ini akan menjalankan fungsi loadPackages jika ada elemen packageGrid dan data packages tersedia.
        if (
          packageGrid &&
          typeof packages !== "undefined" &&
          packages.length > 0
        ) {
          loadPackages();
        }
      });

      if (loadMoreBtn) {
        loadMoreBtn.addEventListener("click", loadPackages);
      }

      if (burgerBtn && mobileMenu) {
        burgerBtn.addEventListener("click", () => {
          mobileMenu.classList.toggle("hidden");
          burgerBtn
            .querySelectorAll(".burger-line")
            .forEach((line) => line.classList.toggle("open"));
        });
      }

      // Memicu modal booking ketika tombol 'Pesan Sekarang' di paket diklik
      document.addEventListener("click", (e) => {
        if (e.target.classList.contains("book-btn") && bookingModal) {
          const packageName = e.target.getAttribute("data-package");
          const packageInput = document.getElementById("package");
          if (packageInput) {
            packageInput.value = packageName;
          }
          bookingModal.classList.remove("hidden");
          bookingModal.style.display = "flex";
        }
      });

      if (closeModalBtn) {
        closeModalBtn.addEventListener("click", () => {
          bookingModal.classList.add("hidden");
          bookingModal.style.display = "none";
        });
      }

      if (bookingModal) {
        bookingModal.addEventListener("click", (e) => {
          if (e.target === bookingModal) {
            bookingModal.classList.add("hidden");
            bookingModal.style.display = "none";
          }
        });
      }
    </script>
  </body>
</html>
